function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var n={},r=[];function t(e){if(n[e])return n[e];var t=new Image;t.onload=function(){n[e]=t,i()&&r.forEach(function(e){e()})},n[e]=!1,t.src=e}function i(){var e=!0;for(var t in n)n.hasOwnProperty(t)&&!n[t]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){t(e)}):t(e)},get:function(e){return n[e]},onReady:function(e){r.push(e)},isReady:i}}();var levelCounter=0,level=document.getElementById("score"),livesCounter=0,lives=document.getElementById("lives"),Sun=function e(t,n){_classCallCheck(this,e),this.x=t,this.y=n},Enemy=function(){function i(e,t,n,r){_classCallCheck(this,i),this.x=e,this.y=t,this.direction=n,this.style=r,this.speed=200*Math.random()+100}return _createClass(i,[{key:"update",value:function(e){"ltr"===this.direction?this.x=this.x+this.speed*e:this.x=this.x-this.speed*e,this.x<790&&"ltr"===this.direction?this.direction="ltr":90<this.x?this.direction="rtl":790<this.x&&"rtl"===this.direction?this.direction="rtl":this.x<10&&(this.direction="ltr"),this.y<player.y+75&&this.y+75>player.y&&this.x<player.x+75&&this.x+75>player.x&&(player.y=425,player.x=400,livesCounter--,lives.firstElementChild.textContent="".concat(livesCounter)),0===livesCounter&&(lives.firstElementChild.textContent=3,livesCounter=3)}}]),i}(),Player=function(){function n(e,t){_classCallCheck(this,n),this.x=e,this.y=t}return _createClass(n,[{key:"update",value:function(){}},{key:"handleInput",value:function(e){"up"===e?this.y=this.y-50:"down"===e?this.y=this.y+50:"left"===e?this.x=this.x-50:"right"===e&&(this.x=this.x+50),this.y<sun.y+100&&this.x+100>sun.x&&this.x<sun.x+100?(this.y=425,levelCounter++,level.firstElementChild.textContent="".concat(levelCounter)):this.x<10?this.x=10:790<this.x?this.x=790:this.y<10?this.y=10:425<this.y&&(this.y=425)}}]),n}(),allEnemies=[new Enemy(100,50,"ltr","enemy1"),new Enemy(100,150,"ltr","enemy2"),new Enemy(100,250,"ltr","enemy3")],player=new Player(400,425),sun=new Sun(400,10);document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var Engine=function(e){e.document;var t,n=e.window,r=document.getElementById("canvas"),i=r.getContext("2d");function a(){var e=Date.now();(function(t){allEnemies.forEach(function(e){e.update(t)}),player.update()})((e-t)/1e3),i.clearRect(0,0,r.width,r.height),i.drawImage(Resources.get("images/background.png"),0,0),function(){i.drawImage(Resources.get("images/sun.png"),sun.x,sun.y),player.tickCount++,player.tickCount>player.ticksPerFrame&&(player.tickCount=0,player.frameIndex++);player.frameIndex>=player.numberOfFrames&&(player.frameIndex=0);var e=Resources.get("images/player.png");i.drawImage(e,0,player.frameIndex*e.naturalHeight/player.numberOfFrames,e.naturalWidth,e.naturalHeight/player.numberOfFrames,player.x,player.y,e.naturalWidth,e.naturalHeight/player.numberOfFrames),allEnemies.forEach(function(e){e.tickCount++,e.tickCount>e.ticksPerFrame&&(e.tickCount=0,e.frameIndex++),e.frameIndex>=e.numberOfFrames&&(e.frameIndex=0);var t=Resources.get("images/".concat(e.style,"-").concat(e.direction,".png"));i.drawImage(t,0,e.frameIndex*t.naturalHeight/e.numberOfFrames,t.naturalWidth,t.naturalHeight/e.numberOfFrames,e.x,e.y,t.naturalWidth,t.naturalHeight/e.numberOfFrames)})}(),t=e,n.requestAnimationFrame(a)}r.width=900,r.height=534,Resources.load(["images/background.png","images/enemy1-ltr.png","images/enemy2-ltr.png","images/enemy3-ltr.png","images/enemy1-rtl.png","images/enemy2-rtl.png","images/enemy3-rtl.png","images/enemy4-rtl.png","images/enemy4-ltr.png","images/sun.png","images/player.png"]),Resources.onReady(function(){allEnemies.forEach(function(e){e.tickCount=0,e.ticksPerFrame=5,e.frameIndex=0,e.numberOfFrames=3}),player.tickCount=0,player.ticksPerFrame=5,player.frameIndex=0,player.numberOfFrames=2,t=Date.now(),a()}),e.ctx=i}(this);